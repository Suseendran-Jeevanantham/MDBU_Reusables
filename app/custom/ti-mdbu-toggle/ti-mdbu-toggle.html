<dom-module id="ti-mdbu-toggle">
	<link rel="import" type="css" href="ti-mdbu-toggle.css">
	<template>
		<div class$="{{getDisabledClass}}">
			<div class="ctrl-hdr">
				{{objValue.label}}
			</div>
			<div class="ctrl-cnt">
				<div class="switch-status">
					{{switchStatus}}
				</div>
				<div class$="{{getStatusClass}}" on-tap="_toggleValue">
					
				</div>
			</div>
		</div>
	</template>
	<script>
		Polymer({
			is: 'ti-mdbu-toggle',
			properties: {
				objValue: {
					type: Object
				},
				switchStatus: {
					type: String
				},
				getStatusClass: {
					type: String,
					computed: '_getStatusClass(objValue.value, objValue.isDisabled)'
				},
				getDisabledClass: {
					type: String,
					computed: '_getDisabledClass(objValue.isDisabled)'
				}
			},
			observers: [
				'_getSwitchStatus(objValue.value)'
			],
			_getSwitchStatus: function(newValue) {			
				this.switchStatus = this.objValue.getSwitchStatus();
			},
			_getStatusClass: function() {
				var classValue = 'on-off-switch';
				if(this.objValue.value) {
					classValue += ' switch-active';
				}
				if(this.objValue.isDisabled) {
					classValue += ' switch-disable';
				}
				return classValue;
			},
			_getDisabledClass: function() {
				if(this.objValue.isDisabled) {
					return 'disabled';
				}
				return '';
			},
			_toggleValue: function(){
				if(!this.objValue || this.objValue.isDisabled) {
					return;
				}
				var newValue = !this.objValue.value;
				this.set('objValue.value', newValue);				
			},
			created: function(){
				var self = this;
				console.log("toggle is created");
			},
			attached: function() {
				
			}
		})
	</script>
</dom-module>